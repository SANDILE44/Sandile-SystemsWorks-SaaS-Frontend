<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Automotive Calculators - Sandile SystemsWorks</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/calculators.css" />
  </head>
  <body>
    <!-- HEADER -->
    <header class="header">
      <div class="container">
        <div class="header-inner">
          <!-- BRAND -->
          <div class="brand">
            <img
              src="images/Untitled design.png"
              alt="Sandile SystemsWorks"
              class="brand-logo"
            />
            <span class="brand-name">Sandile SystemsWorks</span>
          </div>

          <!-- RIGHT ACTIONS -->
          <div class="header-actions">
            <button
              type="button"
              onclick="window.auth.logout()"
              class="btn btn-ghost"
            >
              Logout
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main>
      <div class="breadcrumb">
        <a href="dashboard.html">Sectors</a>
        <span>→</span>
        <a href="sector-secondary.html">Secondary</a>
        <span>→</span>
        <span>Automotive</span>
      </div>

      <h1>Automotive Calculators</h1>
      <p>
        Calculate profitability for vehicle manufacturing, assembly, and parts
        production.
      </p>

      <!-- VEHICLE MANUFACTURING CALCULATOR -->
      <div class="calculator-container">
        <h2>Vehicle Manufacturing Calculator</h2>
        <p>
          Estimate profitability of producing vehicles based on production
          volume, costs, and sales price.
        </p>

        <div class="calculator-grid">
          <!-- INPUTS -->
          <div class="input-section">
            <h3>Inputs</h3>

            <div class="input-group">
              <label for="vehicle-units">Vehicles Produced (Monthly)</label>
              <input
                type="number"
                id="vehicle-units"
                min="0"
                placeholder="Enter units produced"
              />
            </div>

            <div class="input-group">
              <label for="vehicle-cost">Cost Per Vehicle (R)</label>
              <input
                type="number"
                id="vehicle-cost"
                min="0"
                placeholder="Materials, components, etc."
              />
            </div>

            <div class="input-group">
              <label for="vehicle-price">Selling Price Per Vehicle (R)</label>
              <input
                type="number"
                id="vehicle-price"
                min="0"
                placeholder="Selling price"
              />
            </div>

            <div class="input-group">
              <label for="vehicle-fixed">Fixed Costs (R)</label>
              <input
                type="number"
                id="vehicle-fixed"
                min="0"
                placeholder="Factory rent, utilities"
              />
            </div>

            <div class="input-group">
              <label for="vehicle-labor">Labor Costs (R)</label>
              <input
                type="number"
                id="vehicle-labor"
                min="0"
                placeholder="Staff wages"
              />
            </div>

            <div class="input-group">
              <label for="vehicle-operational">Operational Costs (R)</label>
              <input
                type="number"
                id="vehicle-operational"
                min="0"
                placeholder="Marketing, maintenance"
              />
            </div>

            <button type="button" class="reset-btn" data-target="vehicle">
              Reset All
            </button>
          </div>

          <!-- OUTPUTS -->
          <div class="output-section">
            <h3>Results</h3>

            <div class="output-group">
              <div class="output-label">Units Produced</div>
              <div class="output-value" id="vehicle-units-output">0</div>
            </div>

            <div class="output-group">
              <div class="output-label">Total Revenue</div>
              <div class="output-value" id="vehicle-revenue">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Cost of Production</div>
              <div class="output-value" id="vehicle-cogs">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Gross Profit</div>
              <div class="output-value" id="vehicle-gross">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Total Costs</div>
              <div class="output-value" id="vehicle-total-costs">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Net Profit</div>
              <div class="output-value" id="vehicle-profit">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Profit Margin (%)</div>
              <div class="output-value" id="vehicle-margin">0.00%</div>
            </div>

            <div class="output-group">
              <div class="output-label">Markup (%)</div>
              <div class="output-value" id="vehicle-markup">0.00%</div>
            </div>

            <div class="output-group">
              <div class="output-label">ROI (%)</div>
              <div class="output-value" id="vehicle-roi">0.00%</div>
            </div>

            <div class="output-group">
              <div class="output-label">Break-even Units</div>
              <div class="output-value" id="vehicle-breakeven">0</div>
            </div>

            <div class="output-group">
              <div class="output-label">Revenue/Unit</div>
              <div class="output-value" id="vehicle-revenue-unit">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Cost Contribution (%)</div>
              <div class="output-value" id="vehicle-cost-contribution">
                0.00%
              </div>
            </div>

            <div class="output-group">
              <div class="output-label">Monthly Revenue Projection</div>
              <div class="output-value" id="vehicle-monthly-revenue">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Annual Revenue Projection</div>
              <div class="output-value" id="vehicle-annual-revenue">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Annual Net Profit</div>
              <div class="output-value" id="vehicle-annual-profit">R0.00</div>
            </div>
          </div>
        </div>
      </div>
      <!-- ================================
   SECTORS & INDUSTRIES NAVIGATION
================================ -->
      <div class="sectors-navigation">
        <h2>Explore All Sectors & Industries</h2>
        <p>
          Jump to any sector or industry calculators to quickly compare and
          analyze multiple business areas.
        </p>

        <div class="sectors-grid">
          <!-- Primary Sector -->
          <div class="sector-group">
            <h3>Primary Sector</h3>
            <ul>
              <li><a href="industry-agriculture.html">Agriculture</a></li>
              <li><a href="industry-forestry.html">Forestry</a></li>
              <li><a href="industry-fishing.html">Fishing</a></li>
              <li><a href="industry-mining.html">Mining</a></li>
              <li><a href="industry-oil-gas.html">Oil & Gas</a></li>
              <li>
                <a href="industry-renewable-energy.html">Renewable Energy</a>
              </li>
            </ul>
          </div>

          <!-- Secondary Sector -->
          <div class="sector-group">
            <h3>Secondary Sector</h3>
            <ul>
              <li><a href="industry-manufacturing.html">Manufacturing</a></li>
              <li><a href="industry-construction.html">Construction</a></li>
              <li><a href="industry-automotive.html">Automotive</a></li>
              <li><a href="industry-electronics.html">Electronics</a></li>
              <li><a href="industry-textiles.html">Textiles</a></li>
              <li><a href="industry-food-beverage.html">Food & Beverage</a></li>
            </ul>
          </div>

          <!-- Tertiary Sector -->
          <div class="sector-group">
            <h3>Tertiary Sector</h3>
            <ul>
              <li><a href="industry-real-estate.html">Real Estate</a></li>
              <li><a href="industry-retail.html">Retail</a></li>
              <li><a href="industry-restaurants.html">Restaurants</a></li>
              <li><a href="industry-hospitality.html">Hospitality</a></li>
              <li><a href="industry-logistics.html">Logistics</a></li>
              <li><a href="industry-healthcare.html">Healthcare</a></li>
              <li><a href="industry-education.html">Education</a></li>
              <li><a href="industry-finance.html">Finance</a></li>
              <li><a href="industry-marketing.html">Marketing</a></li>
              <li><a href="industry-consulting.html">Consulting</a></li>
            </ul>
          </div>

          <!-- Quaternary Sector -->
          <div class="sector-group">
            <h3>Quaternary Sector</h3>
            <ul>
              <li><a href="industry-software.html">Software</a></li>
              <li><a href="industry-saas.html">SaaS</a></li>
              <li><a href="industry-it-services.html">IT Services</a></li>
              <li><a href="industry-media.html">Media</a></li>
              <li><a href="industry-research-development.html">R&D</a></li>
              <li>
                <a href="industry-telecommunications.html"
                  >Telecommunications</a
                >
              </li>
            </ul>
          </div>

          <!-- Quinary Sector -->
          <div class="sector-group">
            <h3>Quinary Sector</h3>
            <ul>
              <li><a href="industry-government.html">Government</a></li>
              <li><a href="industry-ngos.html">NGOs</a></li>
              <li>
                <a href="industry-social-services.html"
                  >Social & Community Services</a
                >
              </li>
              <li>
                <a href="industry-public-administration.html"
                  >Public Administration</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </main>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script>
      window.auth.requireAccess(); // no token -> login, no access -> payment
    </script>

    <script>
      /* ====================== FORMATTING ====================== */
      function formatCurrency(value) {
        return (
          "R" +
          Number(value).toLocaleString(undefined, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          })
        );
      }

      function formatPercentage(value) {
        return Number(value).toFixed(2) + "%";
      }

      /* ====================== REAL ESTATE CALCULATOR ====================== */
      class RealEstateCalculator {
        calculateFromInputs(cost, rent, expenses, vacancyRate, years) {
          cost = Number(cost) || 0;
          rent = Number(rent) || 0;
          expenses = Number(expenses) || 0;
          vacancyRate = Number(vacancyRate) || 0;
          years = Number(years) || 1;

          const annualIncome = rent * 12 * (1 - vacancyRate / 100);
          const totalIncome = annualIncome * years;
          const totalExpenses = expenses * 12 * years;
          const netProfit = totalIncome - totalExpenses;
          const roi = cost ? (netProfit / cost) * 100 : 0;
          const margin = totalIncome ? (netProfit / totalIncome) * 100 : 0;
          const profitPerR = cost ? netProfit / cost : 0;
          const monthlyProfit = netProfit / (years * 12);
          const annualProfit = netProfit / years;

          return {
            annualIncome,
            totalIncome,
            totalExpenses,
            netProfit,
            roi,
            margin,
            profitPerR,
            monthlyProfit,
            annualProfit,
          };
        }
      }

      const propertyCalc = new RealEstateCalculator();
      const propertyInputs = [
        "property-cost",
        "property-rent",
        "property-expenses",
        "property-vacancy",
        "property-years",
      ];

      propertyInputs.forEach((id) => {
        document
          .getElementById(id)
          .addEventListener("input", updatePropertyCalculator);
      });

      function updatePropertyCalculator() {
        const result = propertyCalc.calculateFromInputs(
          document.getElementById("property-cost").value,
          document.getElementById("property-rent").value,
          document.getElementById("property-expenses").value,
          document.getElementById("property-vacancy").value,
          document.getElementById("property-years").value,
        );

        document.getElementById("property-annual-income").textContent =
          formatCurrency(result.annualIncome);
        document.getElementById("property-total-income").textContent =
          formatCurrency(result.totalIncome);
        document.getElementById("property-total-expenses").textContent =
          formatCurrency(result.totalExpenses);

        const profitEl = document.getElementById("property-profit");
        profitEl.textContent = formatCurrency(result.netProfit);
        profitEl.className =
          "output-value " + (result.netProfit >= 0 ? "positive" : "negative");

        document.getElementById("property-profit-per-r").textContent =
          formatCurrency(result.profitPerR);
        document.getElementById("property-roi").textContent = formatPercentage(
          result.roi,
        );
        document.getElementById("property-margin").textContent =
          formatPercentage(result.margin);
        document.getElementById("property-monthly-profit").textContent =
          formatCurrency(result.monthlyProfit);
        document.getElementById("property-annual-profit").textContent =
          formatCurrency(result.annualProfit);
      }

      /* ====================== VEHICLE / AUTOMOTIVE CALCULATOR ====================== */
      class VehicleCalculator {
        calculateFromInputs(units, cost, price, fixed, labor, operational) {
          units = parseFloat(units) || 0;
          cost = parseFloat(cost) || 0;
          price = parseFloat(price) || 0;
          fixed = parseFloat(fixed) || 0;
          labor = parseFloat(labor) || 0;
          operational = parseFloat(operational) || 0;

          const totalRevenue = units * price;
          const costOfProduction = units * cost;
          const totalCosts = costOfProduction + fixed + labor + operational;
          const grossProfit = totalRevenue - costOfProduction;
          const netProfit = totalRevenue - totalCosts;
          const profitMargin = totalRevenue
            ? (netProfit / totalRevenue) * 100
            : 0;
          const markup = cost ? ((price - cost) / cost) * 100 : 0;
          const roi = totalCosts ? (netProfit / totalCosts) * 100 : 0;
          const breakEvenUnits = price ? totalCosts / price : 0;

          const revenuePerUnit = units ? totalRevenue / units : 0;
          const costContribution = totalCosts
            ? (costOfProduction / totalCosts) * 100
            : 0;
          const monthlyRevenue = totalRevenue;
          const annualRevenue = monthlyRevenue * 12;
          const annualProfit = netProfit * 12;

          return {
            unitsProduced: units,
            totalRevenue,
            costOfProduction,
            totalCosts,
            grossProfit,
            netProfit,
            profitMargin,
            markup,
            roi,
            breakEvenUnits,
            revenuePerUnit,
            costContribution,
            monthlyRevenue,
            annualRevenue,
            annualProfit,
          };
        }
      }

      const vehicleCalc = new VehicleCalculator();
      const vehicleInputs = [
        "vehicle-units",
        "vehicle-cost",
        "vehicle-price",
        "vehicle-fixed",
        "vehicle-labor",
        "vehicle-operational",
      ];

      vehicleInputs.forEach((id) => {
        document
          .getElementById(id)
          .addEventListener("input", updateVehicleCalculator);
      });

      function updateVehicleCalculator() {
        const result = vehicleCalc.calculateFromInputs(
          document.getElementById("vehicle-units").value,
          document.getElementById("vehicle-cost").value,
          document.getElementById("vehicle-price").value,
          document.getElementById("vehicle-fixed").value,
          document.getElementById("vehicle-labor").value,
          document.getElementById("vehicle-operational").value,
        );

        document.getElementById("vehicle-units-output").textContent =
          result.unitsProduced.toFixed(0);
        document.getElementById("vehicle-revenue").textContent = formatCurrency(
          result.totalRevenue,
        );
        document.getElementById("vehicle-cogs").textContent = formatCurrency(
          result.costOfProduction,
        );
        document.getElementById("vehicle-gross").textContent = formatCurrency(
          result.grossProfit,
        );
        document.getElementById("vehicle-total-costs").textContent =
          formatCurrency(result.totalCosts);

        const profitEl = document.getElementById("vehicle-profit");
        profitEl.textContent = formatCurrency(result.netProfit);
        profitEl.className =
          "output-value " + (result.netProfit >= 0 ? "positive" : "negative");

        document.getElementById("vehicle-margin").textContent =
          formatPercentage(result.profitMargin);
        document.getElementById("vehicle-markup").textContent =
          formatPercentage(result.markup);
        document.getElementById("vehicle-roi").textContent = formatPercentage(
          result.roi,
        );
        document.getElementById("vehicle-breakeven").textContent =
          result.breakEvenUnits.toFixed(2);
        document.getElementById("vehicle-revenue-unit").textContent =
          formatCurrency(result.revenuePerUnit);
        document.getElementById("vehicle-cost-contribution").textContent =
          formatPercentage(result.costContribution);
        document.getElementById("vehicle-monthly-revenue").textContent =
          formatCurrency(result.monthlyRevenue);
        document.getElementById("vehicle-annual-revenue").textContent =
          formatCurrency(result.annualRevenue);
        document.getElementById("vehicle-annual-profit").textContent =
          formatCurrency(result.annualProfit);
      }

      /* ====================== UNIVERSAL RESET BUTTONS ====================== */
      document.querySelectorAll(".reset-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          const target = btn.dataset.target; // e.g., 'vehicle', 'property'
          let inputs = [];

          if (target === "vehicle") inputs = vehicleInputs;
          else if (target === "property") inputs = propertyInputs;

          inputs.forEach((id) => (document.getElementById(id).value = ""));

          if (target === "vehicle") updateVehicleCalculator();
          else if (target === "property") updatePropertyCalculator();
        });
      });

      /* ====================== INITIALIZE ====================== */
      updatePropertyCalculator();
      updateVehicleCalculator();
    </script>

    <script>
      const hamburger = document.getElementById("hamburger");
      const sideNav = document.getElementById("sideNav");

      if (hamburger && sideNav) {
        hamburger.addEventListener("click", () => {
          hamburger.classList.toggle("active");
          sideNav.classList.toggle("active");
          document.body.style.overflow = sideNav.classList.contains("active")
            ? "hidden"
            : "";
        });

        document.querySelectorAll("#sideNav a").forEach((link) => {
          link.addEventListener("click", () => {
            hamburger.classList.remove("active");
            sideNav.classList.remove("active");
            document.body.style.overflow = "";
          });
        });
      }
    </script>
  </body>
</html>
