<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Consulting Calculators - Sandile SystemsWorks</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/calculators.css" />
  </head>
  <body>

    <!-- APP LAYOUT -->
    <div class="app-shell">
      <!-- SIDEBAR -->
      <aside class="sidebar">
        <div class="sidebar-top">
          <div class="sidebar-brand">
            <img
              src="images/Untitled design.png"
              alt="Sandile SystemsWorks"
              class="sidebar-logo"
            />
               <span class="sidebar-name">Sandile SystemsWorks</span>
          </div>

          <nav class="sidebar-nav">
            <a href="dashboard.html">Dashboard</a>
            <a href="sector-primary.html">Primary Sector</a>
            <a href="sector-secondary.html" >Secondary Sector</a>
            <a href="sector-tertiary.html" class="active">Tertiary Sector</a>
            <a href="sector-quaternary.html">Quaternary Sector</a>
            <a href="sector-quinary.html">Quinary Sector</a>
          </nav>
        </div>

        <!-- ACCOUNT -->
        <div class="sidebar-account">
          <button id="accountBtn" class="account-btn">
            <span id="accountAvatar" class="account-avatar">U</span>
            <span id="accountName" class="account-name">Account</span>
          </button>

          <div id="accountMenu" class="account-menu">
            <a href="index.html">Home</a>
            <button id="logoutBtn">Logout</button>
          </div>
        </div>
      </aside>
    <main class="main-content">
      <div class="breadcrumb">
        <a href="dashboard.html">Sectors</a>
        <span>→</span>
        <a href="sector-tertiary.html">Tertiary</a>
        <span>→</span>
        <span>Consulting</span>
      </div>

      <h1>Consulting Calculators</h1>
      <p>
        Calculate project profitability and hourly engagement rates for
        consulting services.
      </p>

      <div class="calculator-container">
        <h2>Consulting Project Profitability Calculator</h2>
        <p>
          Analyze project revenue, costs, and profitability based on hours,
          rates, and expenses.
        </p>

        <div class="calculator-grid">
          <!-- INPUTS -->
          <div class="input-section">
            <h3>Inputs</h3>

            <div class="input-group">
              <label for="consult-hours">Total Project Hours</label>
              <input
                type="number"
                id="consult-hours"
                placeholder="Enter total hours"
                min="0"
              />
            </div>

            <div class="input-group">
              <label for="consult-rate">Hourly Rate (R)</label>
              <input
                type="number"
                id="consult-rate"
                placeholder="Rate per hour"
                min="0"
              />
            </div>

            <div class="input-group">
              <label for="consult-expenses">Project Expenses (R)</label>
              <input
                type="number"
                id="consult-expenses"
                placeholder="Travel, materials, etc."
                min="0"
              />
            </div>

            <div class="input-group">
              <label for="consult-labor">Labor Costs (R)</label>
              <input
                type="number"
                id="consult-labor"
                placeholder="Staff salaries"
                min="0"
              />
            </div>

            <div class="input-group">
              <label for="consult-fixed">Fixed Costs (R)</label>
              <input
                type="number"
                id="consult-fixed"
                placeholder="Office, admin, software"
                min="0"
              />
            </div>

            <div class="input-group">
              <label for="consult-discount">Discount (%)</label>
              <input
                type="number"
                id="consult-discount"
                placeholder="Any client discount %"
                min="0"
                max="100"
              />
            </div>

            <div class="input-group">
              <label for="consult-overtime-hours">Overtime Hours</label>
              <input
                type="number"
                id="consult-overtime-hours"
                placeholder="Extra billed hours"
                min="0"
              />
            </div>

            <div class="input-group">
              <label for="consult-overtime-rate"
                >Overtime Hourly Rate (R)</label
              >
              <input
                type="number"
                id="consult-overtime-rate"
                placeholder="Rate per overtime hour"
                min="0"
              />
            </div>

            <div class="input-group">
              <label for="consult-variable-costs">Variable Costs (R)</label>
              <input
                type="number"
                id="consult-variable-costs"
                placeholder="Other variable costs"
                min="0"
              />
            </div>

            <div class="input-group">
              <label for="consult-contingency">Contingency / Risk (%)</label>
              <input
                type="number"
                id="consult-contingency"
                placeholder="Percentage for unexpected costs"
                min="0"
                max="100"
              />
            </div>

            <button type="button" id="resetBtn">Reset All</button>
          </div>

          <!-- OUTPUTS -->
          <div class="output-section">
            <h3>Results</h3>

            <div class="output-group">
              <div class="output-label">Total Revenue</div>
              <div class="output-value" id="consult-revenue">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Discount Amount</div>
              <div class="output-value" id="consult-discount-output">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Revenue After Discount</div>
              <div class="output-value" id="consult-revenue-after-discount">
                R0.00
              </div>
            </div>

            <div class="output-group">
              <div class="output-label">Project Expenses</div>
              <div class="output-value" id="consult-expenses-output">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Labor Costs</div>
              <div class="output-value" id="consult-labor-output">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Fixed Costs</div>
              <div class="output-value" id="consult-fixed-output">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Overtime Revenue</div>
              <div class="output-value" id="consult-overtime-output">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Variable Costs</div>
              <div class="output-value" id="consult-variable-output">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Contingency Amount</div>
              <div class="output-value" id="consult-contingency-output">
                R0.00
              </div>
            </div>

            <div class="output-group">
              <div class="output-label">Total Costs</div>
              <div class="output-value" id="consult-costs">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Profit / Loss</div>
              <div class="output-value" id="consult-profit">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Profit per Hour</div>
              <div class="output-value" id="consult-profit-hour">R0.00</div>
            </div>

            <div class="output-group">
              <div class="output-label">Profit Margin (%)</div>
              <div class="output-value" id="consult-margin">0.00%</div>
            </div>

            <div class="output-group">
              <div class="output-label">ROI (%)</div>
              <div class="output-value" id="consult-roi">0.00%</div>
            </div>

            <div class="output-group">
              <div class="output-label">Break-even Hours</div>
              <div class="output-value" id="consult-breakeven">0.00</div>
            </div>
          </div>
        </div>
      </div>
      <!-- ================================
   SECTORS & INDUSTRIES NAVIGATION
================================ -->
      <div class="sectors-navigation">
        <h2>Explore All Sectors & Industries</h2>
        <p>
          Jump to any sector or industry calculators to quickly compare and
          analyze multiple business areas.
        </p>

        <div class="sectors-grid">
          <!-- Primary Sector -->
          <div class="sector-group">
            <h3>Primary Sector</h3>
            <ul>
              <li><a href="industry-agriculture.html">Agriculture</a></li>
              <li><a href="industry-forestry.html">Forestry</a></li>
              <li><a href="industry-fishing.html">Fishing</a></li>
              <li><a href="industry-mining.html">Mining</a></li>
              <li><a href="industry-oil-gas.html">Oil & Gas</a></li>
              <li>
                <a href="industry-renewable-energy.html">Renewable Energy</a>
              </li>
            </ul>
          </div>

          <!-- Secondary Sector -->
          <div class="sector-group">
            <h3>Secondary Sector</h3>
            <ul>
              <li><a href="industry-manufacturing.html">Manufacturing</a></li>
              <li><a href="industry-construction.html">Construction</a></li>
              <li><a href="industry-automotive.html">Automotive</a></li>
              <li><a href="industry-electronics.html">Electronics</a></li>
              <li><a href="industry-textiles.html">Textiles</a></li>
              <li><a href="industry-food-beverage.html">Food & Beverage</a></li>
            </ul>
          </div>

          <!-- Tertiary Sector -->
          <div class="sector-group">
            <h3>Tertiary Sector</h3>
            <ul>
              <li><a href="industry-real-estate.html">Real Estate</a></li>
              <li><a href="industry-retail.html">Retail</a></li>
              <li><a href="industry-restaurants.html">Restaurants</a></li>
              <li><a href="industry-hospitality.html">Hospitality</a></li>
              <li><a href="industry-logistics.html">Logistics</a></li>
              <li><a href="industry-healthcare.html">Healthcare</a></li>
              <li><a href="industry-education.html">Education</a></li>
              <li><a href="industry-finance.html">Finance</a></li>
              <li><a href="industry-marketing.html">Marketing</a></li>
              <li><a href="industry-consulting.html">Consulting</a></li>
            </ul>
          </div>

          <!-- Quaternary Sector -->
          <div class="sector-group">
            <h3>Quaternary Sector</h3>
            <ul>
              <li><a href="industry-software.html">Software</a></li>
              <li><a href="industry-saas.html">SaaS</a></li>
              <li><a href="industry-it-services.html">IT Services</a></li>
              <li><a href="industry-media.html">Media</a></li>
              <li><a href="industry-research-development.html">R&D</a></li>
              <li>
                <a href="industry-telecommunications.html"
                  >Telecommunications</a
                >
              </li>
            </ul>
          </div>

          <!-- Quinary Sector -->
          <div class="sector-group">
            <h3>Quinary Sector</h3>
            <ul>
              <li><a href="industry-government.html">Government</a></li>
              <li><a href="industry-ngos.html">NGOs</a></li>
              <li>
                <a href="industry-social-services.html"
                  >Social & Community Services</a
                >
              </li>
              <li>
                <a href="industry-public-administration.html"
                  >Public Administration</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>
    </main>

    <!-- ✅ REQUIRED GLOBALS (ORDER MATTERS) -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>

    <!-- ✅ ACCESS GUARD (trial OK, backend decides) -->
  

    <script>
      // =========================
      // Helpers
      // =========================
      function n(v) {
        const x = Number(v);
        return Number.isFinite(x) ? x : 0;
      }

      function clamp(v, min, max) {
        const x = n(v);
        return Math.min(max, Math.max(min, x));
      }

      function formatCurrency(value) {
        const x = n(value);
        return (
          'R' +
          x.toLocaleString(undefined, {
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
          })
        );
      }

      function formatPercentage(value) {
        const x = n(value);
        return x.toFixed(2) + '%';
      }

      // =========================
      // Consulting Calculator
      // =========================
      class ConsultingCalculator {
        calculateFromInputs(
          hours,
          rate,
          expenses,
          labor,
          fixed,
          discount,
          overtimeHours,
          overtimeRate,
          variableCosts,
          contingency
        ) {
          hours = n(hours);
          rate = n(rate);
          expenses = n(expenses);
          labor = n(labor);
          fixed = n(fixed);
          discount = clamp(discount, 0, 100);
          overtimeHours = n(overtimeHours);
          overtimeRate = n(overtimeRate);
          variableCosts = n(variableCosts);
          contingency = clamp(contingency, 0, 100);

          // Revenue
          const baseRevenue = hours * rate;
          const overtimeRevenue = overtimeHours * overtimeRate;
          const totalRevenue = baseRevenue + overtimeRevenue;

          const discountAmount = totalRevenue * (discount / 100);
          const revenueAfterDiscount = totalRevenue - discountAmount;

          // Costs
          const subtotalCosts = expenses + labor + fixed + variableCosts;
          const contingencyAmount = subtotalCosts * (contingency / 100);
          const totalCosts = subtotalCosts + contingencyAmount;

          // Profitability
          const profitLoss = revenueAfterDiscount - totalCosts;

          const totalHours = hours + overtimeHours;
          const profitPerHour = totalHours ? profitLoss / totalHours : 0;

          const margin = revenueAfterDiscount
            ? (profitLoss / revenueAfterDiscount) * 100
            : 0;

          const roi = totalCosts ? (profitLoss / totalCosts) * 100 : 0;

          // Break-even hours (base hours) assuming overtime is fixed
          const effectiveRate = rate * (1 - discount / 100);
          const breakEvenHoursRaw = effectiveRate
            ? (totalCosts - overtimeRevenue) / effectiveRate
            : 0;
          const breakEvenHours = Math.max(0, breakEvenHoursRaw);

          return {
            // revenue
            totalRevenue,
            discountAmount,
            revenueAfterDiscount,
            overtimeRevenue,

            // costs
            expenses,
            labor,
            fixed,
            variableCosts,
            contingencyAmount,
            totalCosts,

            // profit
            profitLoss,
            profitPerHour,
            margin,
            roi,
            breakEvenHours,
          };
        }
      }

      const consultCalc = new ConsultingCalculator();

      const ids = {
        // inputs
        hours: 'consult-hours',
        rate: 'consult-rate',
        expenses: 'consult-expenses',
        labor: 'consult-labor',
        fixed: 'consult-fixed',
        discount: 'consult-discount',
        overtimeHours: 'consult-overtime-hours',
        overtimeRate: 'consult-overtime-rate',
        variableCosts: 'consult-variable-costs',
        contingency: 'consult-contingency',

        // outputs
        revenue: 'consult-revenue',
        discountOut: 'consult-discount-output',
        revenueAfterDiscount: 'consult-revenue-after-discount',
        expensesOut: 'consult-expenses-output',
        laborOut: 'consult-labor-output',
        fixedOut: 'consult-fixed-output',
        overtimeOut: 'consult-overtime-output',
        variableOut: 'consult-variable-output',
        contingencyOut: 'consult-contingency-output',
        costs: 'consult-costs',
        profit: 'consult-profit',
        profitHour: 'consult-profit-hour',
        margin: 'consult-margin',
        roi: 'consult-roi',
        breakeven: 'consult-breakeven',
      };

      const inputIds = [
        ids.hours,
        ids.rate,
        ids.expenses,
        ids.labor,
        ids.fixed,
        ids.discount,
        ids.overtimeHours,
        ids.overtimeRate,
        ids.variableCosts,
        ids.contingency,
      ];

      function getVal(id) {
        const el = document.getElementById(id);
        return el ? el.value : '';
      }

      function setText(id, text) {
        const el = document.getElementById(id);
        if (el) el.textContent = text;
      }

      function updateConsultCalculator() {
        const result = consultCalc.calculateFromInputs(
          getVal(ids.hours),
          getVal(ids.rate),
          getVal(ids.expenses),
          getVal(ids.labor),
          getVal(ids.fixed),
          getVal(ids.discount),
          getVal(ids.overtimeHours),
          getVal(ids.overtimeRate),
          getVal(ids.variableCosts),
          getVal(ids.contingency)
        );

        setText(ids.revenue, formatCurrency(result.totalRevenue));
        setText(ids.discountOut, formatCurrency(result.discountAmount));
        setText(
          ids.revenueAfterDiscount,
          formatCurrency(result.revenueAfterDiscount)
        );

        setText(ids.expensesOut, formatCurrency(result.expenses));
        setText(ids.laborOut, formatCurrency(result.labor));
        setText(ids.fixedOut, formatCurrency(result.fixed));
        setText(ids.overtimeOut, formatCurrency(result.overtimeRevenue));
        setText(ids.variableOut, formatCurrency(result.variableCosts));
        setText(ids.contingencyOut, formatCurrency(result.contingencyAmount));

        setText(ids.costs, formatCurrency(result.totalCosts));

        const profitEl = document.getElementById(ids.profit);
        if (profitEl) {
          profitEl.textContent = formatCurrency(result.profitLoss);
          profitEl.classList.remove('positive', 'negative');
          profitEl.classList.add(
            result.profitLoss >= 0 ? 'positive' : 'negative'
          );
        }

        setText(ids.profitHour, formatCurrency(result.profitPerHour));
        setText(ids.margin, formatPercentage(result.margin));
        setText(ids.roi, formatPercentage(result.roi));
        setText(ids.breakeven, result.breakEvenHours.toFixed(2));
      }

      // Bind inputs
      inputIds.forEach((id) => {
        const el = document.getElementById(id);
        if (el) el.addEventListener('input', updateConsultCalculator);
      });

      // Reset
      const resetBtn = document.getElementById('resetBtn');
      if (resetBtn) {
        resetBtn.addEventListener('click', () => {
          inputIds.forEach((id) => {
            const el = document.getElementById(id);
            if (el) el.value = '';
          });
          updateConsultCalculator();
        });
      }

      // Init
      updateConsultCalculator();
    </script>

    <script>
      // =========================
      // Mobile menu (if present)
      // =========================
      const hamburger = document.getElementById('hamburger');
      const sideNav = document.getElementById('sideNav');

      if (hamburger && sideNav) {
        hamburger.addEventListener('click', () => {
          hamburger.classList.toggle('active');
          sideNav.classList.toggle('active');
          document.body.style.overflow = sideNav.classList.contains('active')
            ? 'hidden'
            : '';
        });

        document.querySelectorAll('#sideNav a').forEach((link) => {
          link.addEventListener('click', () => {
            hamburger.classList.remove('active');
            sideNav.classList.remove('active');
            document.body.style.overflow = '';
          });
        });
      }
    </script>
  </body>
</html>
